<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Happy Birthday Lucy â€” 29 wishes</title>
<style>
  :root{
    --font-lead: clamp(26px, 6vw, 54px);
    --font-wish: clamp(18px, 3.6vw, 30px);
    --gap: 12px;
    --card-bg: rgba(255,255,255,.06);
    --br: 16px;
    --grad: linear-gradient(270deg,#ff4d6d,#f7aef8,#9b5de5,#00bbf9,#00f5d4,#ff4d6d);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:#07060a; color:#fff;
    font-family:"Segoe UI",system-ui,-apple-system,Arial,"Noto Color Emoji",sans-serif;
    overflow:hidden;
  }

  /* fireworks bg */
  canvas#fx{position:fixed; inset:0; z-index:0;
    background: radial-gradient(circle at 50% 15%, #1a132b 0%, #0c0b12 60%, #07060a 100%);
  }

  .stage{
    position:relative; z-index:2; height:100%;
    display:flex; flex-direction:column; align-items:center; padding:16px 16px 120px;
  }
  .hdr{ display:flex; gap:10px; align-items:center; justify-content:center; flex-wrap:wrap; text-align:center; margin-top:6px; }
  .title{
    margin:0; font-weight:900; letter-spacing:.4px;
    font-size: clamp(22px, 4.8vw, 46px);
    background:var(--grad); background-size:1200% 1200%;
    -webkit-background-clip:text; -webkit-text-fill-color:transparent;
    animation:grad 12s ease infinite; text-shadow:0 0 24px rgba(255,255,255,.18);
  }
  .count{ padding:.35rem .7rem; border:1px solid rgba(255,255,255,.2); border-radius:999px; font-weight:600; font-size:14px; opacity:.85; backdrop-filter: blur(6px); background: rgba(255,255,255,.06); }
  @keyframes grad{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

  .controls{ display:flex; gap:8px; margin-top:8px; flex-wrap:wrap; justify-content:center; }
  button.ui{ border:1px solid rgba(255,255,255,.25); background:rgba(255,255,255,.08); color:#fff; padding:.6rem .9rem; border-radius:10px; cursor:pointer; font-weight:600; transition:transform .06s ease; backdrop-filter:blur(6px) }
  button.ui:active{ transform:scale(.98) }

  .panel{
    width:min(960px,94vw); margin-top:14px; background:var(--card-bg);
    border:1px solid rgba(255,255,255,.08); border-radius:var(--br);
    padding:16px; flex:1 1 auto; overflow:auto;
    box-shadow:0 10px 30px rgba(0,0,0,.35) inset, 0 10px 30px rgba(0,0,0,.25);
  }

  /* DÃ²ng 1: lead á»Ÿ giá»¯a */
  .lead{
    text-align:center; margin:2px 0 12px 0; font-weight:900;
    font-size:var(--font-lead);
    background:var(--grad); background-size:1200% 1200%;
    -webkit-background-clip:text; -webkit-text-fill-color:transparent;
    animation:grad 14s ease infinite;
    text-shadow:0 0 18px rgba(255,255,255,.2);
  }

  /* Grid 2 cá»™t cho 28 cÃ¢u cÃ²n láº¡i */
  .grid{
    display:grid; grid-template-columns: 1fr 1fr; gap: var(--gap) 22px;
    align-items:start;
  }
  @media (max-width:700px){
    .grid{ grid-template-columns:1fr; }
  }
  .wish{
    font-size:var(--font-wish); font-weight:800; letter-spacing:.35px; line-height:1.24;
    background:var(--grad); background-size:1200% 1200%;
    -webkit-background-clip:text; -webkit-text-fill-color:transparent;
    animation:grad 16s ease infinite;
    text-shadow:0 0 18px rgba(255,255,255,.18);
    opacity:0; transform: translateY(10px) scale(.98);
  }
  .wish.rtl{ direction:rtl }
  .wish.in{ animation:fadeIn .5s ease forwards }
  @keyframes fadeIn{ to{ opacity:1; transform:translateY(0) scale(1) } }

  /* cake */
  .cake{ position:fixed; bottom:10px; left:50%; transform:translateX(-50%); width:min(360px,70vw); z-index:1; opacity:.95 }
  .flame{ transform-origin:center; animation:flame .9s ease-in-out infinite }
  @keyframes flame{ 0%,100%{transform:scale(1) translateY(0)} 50%{transform:scale(1.06) translateY(-1px)} }

  /* audio btn */
  .sound-btn{ position:fixed; right:16px; bottom:16px; z-index:3; background:rgba(255,255,255,.12); color:#fff; border:1px solid rgba(255,255,255,.25); padding:.7rem 1rem; border-radius:999px; backdrop-filter:blur(6px); cursor:pointer; font-weight:600 }
  .hidden{display:none}
</style>
</head>
<body>
  <canvas id="fx"></canvas>

  <div class="stage">
    <div class="hdr">
      <h1 class="title">Happy Birthday, Lucy</h1>
      <span id="count" class="count">0 / 29</span>
    </div>
    <div class="controls">
      <button id="skip" class="ui">Hiá»‡n nhanh cÃ¢u tiáº¿p theo</button>
      <button id="showAll" class="ui">Hiá»‡n táº¥t cáº£ cÃ²n láº¡i</button>
      <button id="replay" class="ui">Cháº¡y láº¡i tá»« Ä‘áº§u</button>
    </div>

    <div class="panel" id="panel">
      <div id="lead" class="lead">ChÃºc má»«ng sinh nháº­t, Lucy</div>
      <div id="grid" class="grid"></div>
    </div>
  </div>

  <!-- cake svg -->
  <svg class="cake" viewBox="0 0 600 220" aria-hidden="true">
    <ellipse cx="300" cy="200" rx="220" ry="16" fill="rgba(255,255,255,.08)"/>
    <rect x="120" y="110" width="360" height="70" rx="14" fill="#ffb3c1"/>
    <rect x="140" y="95"  width="320" height="40" rx="12" fill="#ffd6ff"/>
    <path d="M140,120 q20,20 40,0 t40,0 t40,0 t40,0 t40,0 t40,0 q20,20 40,0 v15 h-320z" fill="#fff"/>
    <g transform="translate(300,85)">
      <rect x="-6" y="10" width="12" height="35" rx="3" fill="#9b5de5"/>
      <path class="flame" d="M0,0 C-6,-10 -6,-18 0,-24 C6,-18 6,-10 0,0Z" fill="#ffd166" stroke="#ff9f1c" stroke-width="1"/>
    </g>
  </svg>

  <!-- audio (giá»¯ link mp3 cá»§a báº¡n) -->
  <audio id="bgm" src="https://raw.githubusercontent.com/anhvu1411/HPBD-/main/happy-birthday.mp3" autoplay loop playsinline></audio>
  <button id="soundBtn" class="sound-btn hidden">ðŸ”Š Tap for music</button>

<script>
/* ====== Dá»¯ liá»‡u ====== */
/* DÃ²ng 1 lÃ  lead (VN) Ä‘Ã£ hiá»ƒn thá»‹ sáºµn; cÃ²n láº¡i 28 cÃ¢u dÆ°á»›i grid */
const DATA = [
  { t:"Happy Birthday, Lucy" },
  { t:"Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯ Ø³Ø¹ÙŠØ¯ØŒ Ù„ÙˆØ³ÙŠ", rtl:true },
  { t:"Joyeux anniversaire, Lucy" },
  { t:"Alles Gute zum Geburtstag, Lucy" },
  { t:"Feliz cumpleaÃ±os, Lucy" },
  { t:"Feliz aniversÃ¡rio, Lucy" },
  { t:"Buon compleanno, Lucy" },
  { t:"Ð¡ Ð´Ð½Ñ‘Ð¼ Ñ€Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ, Ð›ÑŽÑÐ¸" },
  { t:"ç”Ÿæ—¥å¿«ä¹ï¼Œéœ²è¥¿" },
  { t:"ç”Ÿæ—¥å¿«æ¨‚ï¼Œéœ²è¥¿" },
  { t:"ãƒ«ãƒ¼ã‚·ãƒ¼ã€ãŠèª•ç”Ÿæ—¥ãŠã‚ã§ã¨ã†" },
  { t:"ìƒì¼ ì¶•í•˜í•´, ë£¨ì‹œ" },
  { t:"à¤œà¤¨à¥à¤®à¤¦à¤¿à¤¨ à¤®à¥à¤¬à¤¾à¤°à¤• à¤¹à¥‹, à¤²à¥‚à¤¸à¥€" },
  { t:"à¦¶à§à¦­ à¦œà¦¨à§à¦®à¦¦à¦¿à¦¨, à¦²à§à¦¸à¦¿" },
  { t:"DoÄŸum gÃ¼nÃ¼n kutlu olsun, Lucy" },
  { t:"à¸ªà¸¸à¸‚à¸ªà¸±à¸™à¸•à¹Œà¸§à¸±à¸™à¹€à¸à¸´à¸”, à¸¥à¸¹à¸‹à¸µà¹ˆ" },
  { t:"Î§Î±ÏÎ¿ÏÎ¼ÎµÎ½Î± Î³ÎµÎ½Î­Î¸Î»Î¹Î±, Î›Î¿ÏÏƒÎ¹" },
  { t:"×™×•× ×”×•×œ×“×ª ×©×ž×—, ×œ×•×¡×™", rtl:true },
  { t:"ØªÙˆÙ„Ø¯Øª Ù…Ø¨Ø§Ø±Ú©ØŒ Ù„ÙˆØ³ÛŒ", rtl:true },
  { t:"Selamat ulang tahun, Lucy" },
  { t:"Selamat hari jadi, Lucy" },
  { t:"VÅ¡echno nejlepÅ¡Ã­ k narozeninÃ¡m, Lucy" },
  { t:"Grattis pÃ¥ fÃ¶delsedagen, Lucy" },
  { t:"HyvÃ¤Ã¤ syntymÃ¤pÃ¤ivÃ¤Ã¤, Lucy" },
  { t:"Palju Ãµnne sÃ¼nnipÃ¤evaks, Lucy" },
  { t:"Boldog szÃ¼letÃ©snapot, Lucy" },
  { t:"Sto lat, Lucy" },
  { t:"La mulÈ›i ani, Lucy" },
]; // 28 má»¥c

const grid   = document.getElementById('grid');
const panel  = document.getElementById('panel');
const countEl= document.getElementById('count');
const btnSkip= document.getElementById('skip');
const btnAll = document.getElementById('showAll');
const btnReplay=document.getElementById('replay');

let idx=0, running=false, revealAll=false;

/* ====== Helpers ====== */
function sleep(ms){ return new Promise(r=>setTimeout(r,ms)); }
function updateCount(){
  // 1 (lead) + sá»‘ pháº§n tá»­ Ä‘Ã£ render trong grid
  const shown = 1 + grid.querySelectorAll('.wish').length;
  countEl.textContent = `${shown} / 29`;
}
function addWish(item){
  const div=document.createElement('div');
  div.className='wish';
  if(item.rtl) div.classList.add('rtl');
  div.textContent=item.t;
  grid.appendChild(div);
  requestAnimationFrame(()=>div.classList.add('in'));
  // scroll xuá»‘ng cuá»‘i Ä‘á»ƒ tháº¥y má»¥c má»›i
  panel.scrollTop = panel.scrollHeight;
  updateCount();
}
async function play(){
  if(running) return; running=true;
  for(; idx<DATA.length; idx++){
    addWish(DATA[idx]);
    if(!revealAll) await sleep(700);  // tá»‘c Ä‘á»™ hiá»‡n
  }
  running=false;
}

/* ====== Buttons ====== */
btnSkip.onclick = ()=>{
  if(idx<DATA.length){ addWish(DATA[idx]); idx++; }
  if(!running) play();
};
btnAll.onclick = ()=>{ revealAll=true; if(!running) play(); };
btnReplay.onclick = ()=>{
  idx=0; revealAll=false; running=false; grid.innerHTML=''; updateCount(); play();
};

updateCount(); play();

/* ====== Fireworks ====== */
const c=document.getElementById('fx'); const ctx=c.getContext('2d',{alpha:true});
let W,H,dpr=Math.min(devicePixelRatio||1,2);
function resize(){ W=c.width=Math.floor(innerWidth*dpr); H=c.height=Math.floor(innerHeight*dpr); ctx.setTransform(dpr,0,0,dpr,0,0); }
addEventListener('resize',resize); resize();
const sparks=[]; const palette=['#ff4d6d','#f7aef8','#9b5de5','#00bbf9','#00f5d4','#ffd166','#ff9f1c'];
function burst(x,y){
  const N=60+Math.random()*40;
  for(let i=0;i<N;i++){
    const a=Math.random()*Math.PI*2, v=2+Math.random()*4;
    sparks.push({x,y,vx:Math.cos(a)*v,vy:Math.sin(a)*v-2,life:60+Math.random()*30,age:0,color:palette[(Math.random()*palette.length)|0]});
  }
}
function loop(){
  ctx.fillStyle='rgba(7,6,10,.25)'; ctx.fillRect(0,0,innerWidth,innerHeight);
  for(let i=sparks.length-1;i>=0;i--){
    const p=sparks[i]; p.age++; p.x+=p.vx; p.y+=p.vy; p.vy+=0.04;
    const t=1-p.age/p.life; if(t<=0){ sparks.splice(i,1); continue; }
    ctx.beginPath(); ctx.arc(p.x,p.y,2.2*t+0.6,0,Math.PI*2);
    ctx.fillStyle=p.color; ctx.globalAlpha=Math.max(t,.15); ctx.fill(); ctx.globalAlpha=1;
  } requestAnimationFrame(loop);
}
loop(); setInterval(()=>burst(Math.random()*innerWidth, innerHeight*(.25+.5*Math.random())), 1100);
addEventListener('click',e=>burst(e.clientX,e.clientY));
addEventListener('touchstart',e=>{const t=e.touches[0]; burst(t.clientX,t.clientY);},{passive:true});

/* ====== Audio autoplay ====== */
const audio=document.getElementById('bgm'); const btn=document.getElementById('soundBtn');
if(audio){
  audio.volume=.6;
  const tryPlay=()=>audio.play().then(()=>btn.classList.add('hidden')).catch(()=>btn.classList.remove('hidden'));
  const unlock=()=>{tryPlay(); removeEventListener('touchstart',unlock); removeEventListener('click',unlock);};
  tryPlay(); addEventListener('touchstart',unlock,{once:true}); addEventListener('click',unlock,{once:true});
  btn&&btn.addEventListener('click',tryPlay);
  document.addEventListener('visibilitychange',()=>{ if(!document.hidden && audio.paused) tryPlay(); });
}
</script>
</body>
</html>

